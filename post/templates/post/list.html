{% extends "base.html" %}
{% load dractags %}
{% load staticfiles %}

{% block extrahead %}
    <style>
        .container{
            margin-top: 20px;
            -webkit-box-shadow: 0px 0px 7px 1px rgba(212,205,212,1);
            -moz-box-shadow: 0px 0px 7px 1px rgba(212,205,212,1);
            box-shadow: 0px 0px 3px 1px rgba(212,205,212,1);
            border-radius: 7px 7px 7px 7px;
            -moz-border-radius: 7px 7px 7px 7px;
            -webkit-border-radius: 7px 7px 7px 7px;
            border: 0px solid #fafafa;
            padding: 20px;
            padding-left: 40px;
            padding-right: 40px;
        }
        .content{
            margin-left: 40px;
        }
    </style>
{% endblock extrahead %}

{% block content %}
  <div class="container">
    <div class="row">
        <div class="col-md-12">
            <h3 class="title">{{ post.title }}</h3>
            <small>Author: {{ post.author }} | Created: {{ post.date_created }}</small>
            <hr>
            <div class="content">
                {{ post.content|safe_markdown }}
            </div>
            <hr>
            <div class="tags">
                <small><p>Tags: {% for tag in tags %}{{ tag }}{% endfor %}</small></p>
            </div>
                <button type="button" class="btn btn-secondary" id="like">Like</button>
                <button type="button" class="btn btn-secondary" id="dislike">Dislike</button>
            <br><br>
            <div class="comment">
      
                    {% include "includes/comments.html" with comments=comments %}
             <br>

             {% if user.is_authenticated  %}
             <form action="{% url 'post:comment' post.slug %}" method="POST">{% csrf_token %}
                <div class="form-group">
                    <label for="comment">Comment</label>
                    <textarea class="form-control" id="comment" name="comment" rows="3"></textarea><br>
                    <input class="btn btn-outline-info" type="submit" value="submit">
                </div>                 
             </form>
             {% else %}
             <h6>Login to Comment</h6>
             {% endif %}
            </div>
        </div>
    </div>
  </div>
{% endblock content %}

{% block script %}
<script type="text/javascript">
$(document).ready(function(){
        $('#like').click(function(){
            $.ajax({
                url: '/activity/',
                type: 'POST',
                data: {
                    'post_slug': '{{ post.slug }}',
                     csrfmiddlewaretoken: '{{ csrf_token }}',
                     'atype': 'L'
                },
                dataType: 'json',
                success: function(data){
                    if (data.status == true){
                        
                        }
                }
            });
        });
        $('#dislike').click(function(){
            $.ajax({
                url: '/activity/',
                type: 'POST',
                data: {
                    'post_slug': '{{ post.slug }}',
                     csrfmiddlewaretoken: '{{ csrf_token }}',
                     'atype': 'D'
                },
                dataType: 'json',
                success: function(data){
                    if (data.status == true){
                        
                        }
                }
            });
        });
    }) ;
</script>

{% endblock script %}